[gd_scene load_steps=36 format=4 uid="uid://dbxean877egrv"]

[ext_resource type="Script" uid="uid://daitot221wqe7" path="res://scenes/revel_east/forge/forge.gd" id="1_b7ac7"]
[ext_resource type="Texture2D" uid="uid://cuunf5kllexvn" path="res://assets/tiles2.png" id="2_b7ac7"]
[ext_resource type="PackedScene" uid="uid://bs36kitagkmg5" path="res://player.tscn" id="2_se5dk"]
[ext_resource type="Texture2D" uid="uid://cdjtsg3a4eal0" path="res://assets/objects/furniture/bed.png" id="3_vhmh4"]
[ext_resource type="Texture2D" uid="uid://b8j562i6ciiuh" path="res://assets/objects/furniture/chair2.png" id="4_1a1fe"]
[ext_resource type="Texture2D" uid="uid://cddn553stto7y" path="res://assets/objects/furniture/table2.png" id="5_kin5l"]
[ext_resource type="Texture2D" uid="uid://dcvifxr4uji3h" path="res://assets/objects/furniture/chest5.png" id="6_eg132"]
[ext_resource type="Texture2D" uid="uid://bbsqj0o8h33qw" path="res://assets/objects/smith-room/wheel.png" id="6_hnwuu"]
[ext_resource type="Texture2D" uid="uid://ddxcbxhtjp8xu" path="res://assets/objects/smith-room/door1.png" id="7_k3c1x"]
[ext_resource type="Texture2D" uid="uid://u04gml8lrs8o" path="res://assets/objects/smith-room/anvil.png" id="7_sw2kw"]
[ext_resource type="Texture2D" uid="uid://b6wila6ls3w5s" path="res://assets/objects/smith-room/shovel.png" id="9_pmd2t"]
[ext_resource type="Texture2D" uid="uid://c6nx6w363lmao" path="res://assets/objects/smith-room/Iron ingots.png" id="10_l6lcm"]
[ext_resource type="Texture2D" uid="uid://dgxie2etanup3" path="res://assets/objects/smith-room/instruments.png" id="11_2u58i"]
[ext_resource type="Texture2D" uid="uid://nifxi2s342xd" path="res://assets/objects/furniture/wooden-crate2.png" id="12_2u58i"]
[ext_resource type="Texture2D" uid="uid://de2pta4jcuvus" path="res://assets/objects/smith-room/gauntlet.png" id="12_g4vrm"]
[ext_resource type="Texture2D" uid="uid://bgqjbst8e4pcf" path="res://assets/objects/weapons/hammer.png" id="14_3qg1m"]
[ext_resource type="Texture2D" uid="uid://dybiy1pwlgtt6" path="res://assets/objects/smith-room/furnace.png" id="14_kkgga"]
[ext_resource type="PackedScene" uid="uid://gty6ne6exn21" path="res://scenes/elements/npc.tscn" id="22_3qg1m"]
[ext_resource type="PackedScene" uid="uid://2dkwfsgaefnk" path="res://scenes/elements/FadeArea.tscn" id="22_g4vrm"]
[ext_resource type="Texture2D" uid="uid://bede4j64b60ov" path="res://assets/objects/furniture/shelf2.png" id="23_g4vrm"]
[ext_resource type="Script" uid="uid://c40knvp66jxf0" path="res://scenes/elements/FadeArea.gd" id="23_kin5l"]
[ext_resource type="Texture2D" uid="uid://cyky3lxcmr67w" path="res://assets/objects/furniture/bucket-water.png" id="24_kin5l"]
[ext_resource type="Texture2D" uid="uid://dwwwa2it1dt5t" path="res://assets/objects/food/onions.png" id="25_kkgga"]
[ext_resource type="Texture2D" uid="uid://c5wqf0qlr6g76" path="res://assets/objects/food/bottle3.png" id="26_3qg1m"]
[ext_resource type="AudioStream" uid="uid://cfgy7yg3i6bh7" path="res://music/forge/The Smith's Song.mp3" id="26_g4vrm"]
[ext_resource type="AudioStream" uid="uid://h5lgwyqd4i0p" path="res://music/forge/Fireside Tale.mp3" id="26_kin5l"]
[ext_resource type="Texture2D" uid="uid://b5qverp8f4ney" path="res://assets/objects/food/black-bread.png" id="27_2oisn"]
[ext_resource type="AudioStream" uid="uid://fos6spyi14bv" path="res://music/forge/The Smith's Song2.mp3" id="27_kin5l"]
[ext_resource type="Script" uid="uid://dotxenhm1atxm" path="res://scenes/elements/door.gd" id="29_kkgga"]
[ext_resource type="AudioStream" uid="uid://cqgq5vtwp8031" path="res://sounds/door.mp3" id="30_3qg1m"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_kkgga"]
vertices = PackedVector2Array(64, 0, 0, 32, -64, 0, 0, -32)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3)])
outlines = Array[PackedVector2Array]([PackedVector2Array(0, -32, -64, 0, 0, 32, 64, 0)])
agent_radius = 0.0

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_k3c1x"]
texture = ExtResource("2_b7ac7")
texture_region_size = Vector2i(128, 128)
0:0/0 = 0
1:0/0 = 0
3:0/0 = 0
4:0/0 = 0
5:0/0 = 0
2:0/0 = 0
3:1/0 = 0
3:2/0 = 0
2:2/0 = 0
2:1/0 = 0
1:2/0 = 0
3:3/0 = 0
3:3/0/navigation_layer_0/polygon = SubResource("NavigationPolygon_kkgga")
2:3/0 = 0
2:3/0/physics_layer_0/polygon_0/points = PackedVector2Array(0, -32, -64, 0, 0, 32, 64, 0)

[sub_resource type="TileSet" id="TileSet_aes7p"]
tile_shape = 1
tile_layout = 5
tile_size = Vector2i(128, 64)
physics_layer_0/collision_layer = 1
navigation_layer_0/layers = 1
sources/1 = SubResource("TileSetAtlasSource_k3c1x")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_beq2v"]
streams_count = 3
stream_0/stream = ExtResource("26_kin5l")
stream_1/stream = ExtResource("27_kin5l")
stream_2/stream = ExtResource("26_g4vrm")

[sub_resource type="RectangleShape2D" id="RectangleShape2D_kkgga"]
resource_local_to_scene = true
size = Vector2(216.445, 82.7635)

[node name="Forge" type="Node2D"]
position = Vector2(-733, -360)
script = ExtResource("1_b7ac7")

[node name="Floor" type="TileMapLayer" parent="."]
tile_map_data = PackedByteArray("AAAOAAMAAQADAAMAAAAOAAAAAQADAAMAAAAPAAAAAQADAAMAAAAPAP//AQADAAMAAAAOAP//AQADAAMAAAANAP//AQADAAMAAAAMAP//AQADAAMAAAALAP//AQADAAMAAAAKAP//AQADAAMAAAAKAAAAAQADAAMAAAAKAAEAAQADAAMAAAAKAAIAAQADAAMAAAALAAAAAQADAAMAAAALAAMAAQADAAMAAAAMAAMAAQADAAMAAAAMAAQAAQADAAMAAAAMAAUAAQADAAMAAAAMAAAAAQADAAMAAAANAAMAAQADAAMAAAANAAAAAQADAAMAAAANAAUAAQADAAMAAAAKAAMAAQADAAMAAAAKAAQAAQADAAMAAAALAAQAAQADAAMAAAAMAAYAAQADAAMAAAANAAYAAQADAAMAAAAPAAEAAQADAAMAAAAPAAIAAQADAAMAAAAPAAMAAQADAAMAAAAPAAQAAQADAAMAAAALAAUAAQADAAMAAAANAAQAAQADAAMAAAAOAAQAAQADAAMAAAAPAAUAAQADAAMAAAAOAAUAAQADAAMAAAAOAAYAAQADAAEAAAAPAAYAAQADAAEAAAAQAAUAAQADAAEAAAAQAAQAAQADAAEAAAAQAAMAAQADAAEAAAAQAAIAAQADAAEAAAAQAAEAAQADAAEAAAAQAAAAAQADAAEAAAAQAP//AQADAAEAAAAQAAYAAQADAAEAAAAKAAUAAQADAAMAAAAQAP7/AQADAAEAAAAQAP3/AQADAAEAAAAPAP3/AQACAAMAAAAOAP3/AQACAAMAAAANAP3/AQACAAMAAAAMAP3/AQACAAMAAAALAP3/AQACAAMAAAAKAP3/AQACAAMAAAAJAP3/AQACAAMAAAAIAP3/AQACAAMAAAAIAP7/AQACAAMAAAAIAP//AQACAAMAAAAIAAAAAQACAAMAAAAIAAEAAQACAAMAAAAIAAIAAQACAAMAAAAIAAMAAQACAAMAAAAIAAQAAQACAAMAAAAIAAUAAQACAAMAAAALAAYAAQADAAEAAAAKAAYAAQADAAEAAAAJAAYAAQADAAEAAAAIAAYAAQADAAEAAAALAAEAAQADAAMAAAALAAIAAQADAAMAAAAMAAEAAQADAAMAAAAMAAIAAQADAAMAAAANAAEAAQADAAMAAAANAAIAAQADAAMAAAAOAAEAAQADAAMAAAAOAAIAAQADAAMAAAA=")
tile_set = SubResource("TileSet_aes7p")

[node name="Node2D" type="Node2D" parent="."]

[node name="WallsBack" type="TileMapLayer" parent="Node2D"]
y_sort_enabled = true
position = Vector2(-3.05176e-05, -6.10352e-05)
tile_map_data = PackedByteArray("AAAHAAUAAQACAAMAAAAHAAQAAQACAAMAAAAHAAMAAQACAAMAAAAHAAIAAQACAAMAAAAHAAEAAQACAAMAAAAHAAAAAQACAAMAAAAHAP//AQACAAMAAAAHAP7/AQACAAMAAAAHAP3/AQACAAMAAAAHAPz/AQACAAMAAAAIAPz/AQACAAMAAAAJAPz/AQACAAMAAAAKAPz/AQACAAMAAAALAPz/AQACAAMAAAAMAPz/AQACAAMAAAANAPz/AQACAAMAAAAOAPz/AQACAAMAAAAPAPz/AQACAAMAAAA=")
tile_set = SubResource("TileSet_aes7p")

[node name="StaticBody2D" type="StaticBody2D" parent="Node2D/WallsBack"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Node2D/WallsBack/StaticBody2D"]
polygon = PackedVector2Array(574, 641, 704, 708, 1187, 456, 765, 255, 241, 481, 346, 601, 422, 692, 129, 474, 766, 200, 1345, 457, 704, 775, 421, 690)

[node name="WallsFront1" type="TileMapLayer" parent="Node2D"]
z_index = 1
y_sort_enabled = true
position = Vector2(-3.05176e-05, -6.10352e-05)
tile_map_data = PackedByteArray("AAAIAAUAAQACAAMAAAAJAAUAAQACAAMAAAAKAAUAAQACAAMAAAA=")
tile_set = SubResource("TileSet_aes7p")

[node name="Furniture" type="Node2D" parent="Node2D/WallsFront1"]
y_sort_enabled = true
position = Vector2(3.05176e-05, 6.10352e-05)

[node name="Bed" type="Sprite2D" parent="Node2D/WallsFront1/Furniture"]
y_sort_enabled = true
position = Vector2(567, 370)
texture = ExtResource("3_vhmh4")

[node name="collision" type="StaticBody2D" parent="Node2D/WallsFront1/Furniture/Bed"]
position = Vector2(600, 507)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Node2D/WallsFront1/Furniture/Bed/collision"]
position = Vector2(-589, -503)
polygon = PackedVector2Array(-17, 84, -101, 37, -7, -37, 88, 25)

[node name="Chair2" type="Sprite2D" parent="Node2D/WallsFront1/Furniture"]
y_sort_enabled = true
position = Vector2(669, 332)
texture = ExtResource("4_1a1fe")

[node name="collision" type="StaticBody2D" parent="Node2D/WallsFront1/Furniture/Chair2"]
position = Vector2(171, 141)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Node2D/WallsFront1/Furniture/Chair2/collision"]
polygon = PackedVector2Array(-203, -112, -171, -94, -137, -111, -169, -133)

[node name="Table" type="Sprite2D" parent="Node2D/WallsFront1/Furniture"]
position = Vector2(733, 519)
scale = Vector2(0.917968, 0.917968)
texture = ExtResource("5_kin5l")

[node name="StaticBody2D" type="StaticBody2D" parent="Node2D/WallsFront1/Furniture/Table"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Node2D/WallsFront1/Furniture/Table/StaticBody2D"]
polygon = PackedVector2Array(-86.0596, 55.5575, 39.217, -19.6085, 87.149, 6.53618, -41.3957, 80.6128)

[node name="Onions" type="Sprite2D" parent="Node2D/WallsFront1/Furniture/Table"]
position = Vector2(-45.6475, 2.07298)
scale = Vector2(0.372816, 0.372816)
texture = ExtResource("25_kkgga")

[node name="Bottle3" type="Sprite2D" parent="Node2D/WallsFront1/Furniture/Table"]
position = Vector2(11.3954, -31.004)
scale = Vector2(0.213436, 0.213436)
texture = ExtResource("26_3qg1m")

[node name="Black-bread" type="Sprite2D" parent="Node2D/WallsFront1/Furniture/Table"]
position = Vector2(-14.4576, -11.1895)
scale = Vector2(0.311006, 0.311006)
texture = ExtResource("27_2oisn")

[node name="Bucket-water" type="Sprite2D" parent="Node2D/WallsFront1/Furniture/Table"]
position = Vector2(41.3958, -49.0213)
scale = Vector2(0.406092, 0.406092)
texture = ExtResource("24_kin5l")

[node name="Shelf2" type="Sprite2D" parent="Node2D/WallsFront1/Furniture"]
position = Vector2(825, 200)
scale = Vector2(0.648438, 0.648438)
texture = ExtResource("23_g4vrm")

[node name="Chest5" type="Sprite2D" parent="Node2D/WallsFront1/Furniture"]
position = Vector2(446, 429)
texture = ExtResource("6_eg132")

[node name="Wheel" type="Sprite2D" parent="Node2D/WallsFront1/Furniture"]
position = Vector2(894, 332)
texture = ExtResource("6_hnwuu")

[node name="StaticBody2D" type="StaticBody2D" parent="Node2D/WallsFront1/Furniture/Wheel"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Node2D/WallsFront1/Furniture/Wheel/StaticBody2D"]
position = Vector2(-7, -12)
polygon = PackedVector2Array(-48, 27, 5.19797, -3.89847, 57, 29, 4, 56)

[node name="Anvil" type="Sprite2D" parent="Node2D/WallsFront1/Furniture"]
position = Vector2(877, 452)
texture = ExtResource("7_sw2kw")

[node name="StaticBody2D" type="StaticBody2D" parent="Node2D/WallsFront1/Furniture/Anvil"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Node2D/WallsFront1/Furniture/Anvil/StaticBody2D"]
position = Vector2(-7, -12)
polygon = PackedVector2Array(-48, 27, 5.19797, -3.89847, 57, 29, 4, 56)

[node name="Hammer" type="Sprite2D" parent="Node2D/WallsFront1/Furniture/Anvil"]
position = Vector2(8, -37)
rotation = 0.932006
scale = Vector2(0.78, 0.78)
skew = 0.287979
texture = ExtResource("14_3qg1m")

[node name="IronIngots" type="Sprite2D" parent="Node2D/WallsFront1/Furniture"]
position = Vector2(1096, 455)
texture = ExtResource("10_l6lcm")

[node name="StaticBody2D" type="StaticBody2D" parent="Node2D/WallsFront1/Furniture/IronIngots"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Node2D/WallsFront1/Furniture/IronIngots/StaticBody2D"]
position = Vector2(-7, -12)
polygon = PackedVector2Array(-48, 27, 5.19797, -3.89847, 57, 29, 4, 56)

[node name="Instruments" type="Sprite2D" parent="Node2D/WallsFront1/Furniture"]
position = Vector2(835, 298)
scale = Vector2(0.726562, 0.726562)
texture = ExtResource("11_2u58i")

[node name="StaticBody2D" type="StaticBody2D" parent="Node2D/WallsFront1/Furniture/Instruments"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Node2D/WallsFront1/Furniture/Instruments/StaticBody2D"]
position = Vector2(-6.88172, 5.50538)
polygon = PackedVector2Array(-48, 27, 6.88171, 2.75269, 57, 29, 4, 56)

[node name="Wooden-crate2" type="Sprite2D" parent="Node2D/WallsFront1/Furniture"]
position = Vector2(941, 518)
scale = Vector2(0.695312, 0.695312)
texture = ExtResource("12_2u58i")

[node name="collision" type="StaticBody2D" parent="Node2D/WallsFront1/Furniture/Wooden-crate2"]
position = Vector2(171, 141)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Node2D/WallsFront1/Furniture/Wooden-crate2/collision"]
position = Vector2(15.9664, -11.5617)
polygon = PackedVector2Array(-232.989, -116.494, -184.09, -92.045, -137, -111, -186.966, -145.259)

[node name="Gauntlet" type="Sprite2D" parent="Node2D/WallsFront1/Furniture/Wooden-crate2"]
position = Vector2(-3.8147e-06, -27.3259)
rotation = 0.354302
scale = Vector2(0.561798, 0.561798)
texture = ExtResource("12_g4vrm")

[node name="Shovel" type="Sprite2D" parent="Node2D/WallsFront1/Furniture"]
position = Vector2(762, 238)
scale = Vector2(0.621094, 0.621094)
texture = ExtResource("9_pmd2t")

[node name="Furnace" type="Sprite2D" parent="Node2D/WallsFront1/Furniture"]
position = Vector2(1038, 377)
texture = ExtResource("14_kkgga")

[node name="StaticBody2D" type="StaticBody2D" parent="Node2D/WallsFront1/Furniture/Furnace"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Node2D/WallsFront1/Furniture/Furnace/StaticBody2D"]
position = Vector2(-68, 8)
polygon = PackedVector2Array(-48, 27, 37, -23, 137, 28, 46, 79)

[node name="NPC" parent="Node2D/WallsFront1" instance=ExtResource("22_3qg1m")]
position = Vector2(606, 465)

[node name="Player" parent="Node2D/WallsFront1" instance=ExtResource("2_se5dk")]
y_sort_enabled = true
position = Vector2(720, 371)

[node name="DoorAndWalls" type="Sprite2D" parent="Node2D"]
z_index = 1
y_sort_enabled = true
position = Vector2(468, 589)
scale = Vector2(1.04297, 0.957031)
texture = ExtResource("7_k3c1x")
centered = false
offset = Vector2(-128, -180)

[node name="WallsFront" type="TileMapLayer" parent="Node2D"]
z_index = 1
y_sort_enabled = true
position = Vector2(-3.05176e-05, -6.10352e-05)
tile_map_data = PackedByteArray("AAAPAPz/AQACAAMAAAAPAP3/AQACAAMAAAAPAP7/AQACAAMAAAAPAP//AQACAAMAAAAPAAAAAQACAAMAAAAPAAEAAQACAAMAAAAPAAIAAQACAAMAAAAPAAMAAQACAAMAAAAPAAQAAQACAAMAAAAPAAUAAQACAAMAAAANAAUAAQACAAMAAAAOAAUAAQACAAMAAAA=")
tile_set = SubResource("TileSet_aes7p")

[node name="FadeArea" parent="Node2D/WallsFront" instance=ExtResource("22_g4vrm")]
script = ExtResource("23_kin5l")
target_to_fade = NodePath("..")

[node name="CollisionPolygon2D" parent="Node2D/WallsFront/FadeArea" index="0"]
polygon = PackedVector2Array(500, 560, 573, 531, 704, 588, 1182, 348, 1378, 433, 698, 802, 499, 710)

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
stream = SubResource("AudioStreamRandomizer_beq2v")
volume_db = -15.54
autoplay = true

[node name="Doors" type="Node2D" parent="."]

[node name="door_main" type="Area2D" parent="Doors"]
position = Vector2(316, 670)
script = ExtResource("29_kkgga")
destination_level_tag = "revel_east"
destination_door_tag = "forge"
spawn_direction = "south"

[node name="Spawn" type="Marker2D" parent="Doors/door_main"]
position = Vector2(270, -181)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Doors/door_main"]
position = Vector2(153.48, -114.184)
rotation = 0.485202
scale = Vector2(1, 1)
shape = SubResource("RectangleShape2D_kkgga")
debug_color = Color(0.25817, 0.552912, 0.832533, 0.42)

[node name="ColorRect" type="ColorRect" parent="Doors/door_main/CollisionShape2D"]
offset_left = -117.0
offset_top = -77.0
offset_right = 790.0
offset_bottom = 310.0
scale = Vector2(0.312309, 0.264889)
color = Color(0.229009, 0.478447, 0.846532, 0.403922)

[node name="OpenSound" type="AudioStreamPlayer" parent="Doors/door_main"]
stream = ExtResource("30_3qg1m")

[connection signal="body_entered" from="Doors/door_main" to="Doors/door_main" method="_on_body_entered"]

[editable path="Node2D/WallsFront/FadeArea"]
